<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Database storage | @kyungyunlee&#39;s notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/TIL/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <meta name="description" content="My Personal Wiki (Today I Learned)">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.98cb0daf.css" as="style"><link rel="preload" href="/TIL/assets/js/app.47e7122b.js" as="script"><link rel="preload" href="/TIL/assets/js/2.3a8afc01.js" as="script"><link rel="preload" href="/TIL/assets/js/10.d58d22f2.js" as="script"><link rel="prefetch" href="/TIL/assets/js/11.c83ffcd6.js"><link rel="prefetch" href="/TIL/assets/js/12.26505886.js"><link rel="prefetch" href="/TIL/assets/js/13.3cd93f2e.js"><link rel="prefetch" href="/TIL/assets/js/14.5c48d207.js"><link rel="prefetch" href="/TIL/assets/js/15.44de18dd.js"><link rel="prefetch" href="/TIL/assets/js/16.a0f29604.js"><link rel="prefetch" href="/TIL/assets/js/17.d265fe11.js"><link rel="prefetch" href="/TIL/assets/js/18.6333c551.js"><link rel="prefetch" href="/TIL/assets/js/19.0c5688a1.js"><link rel="prefetch" href="/TIL/assets/js/20.edd87bbc.js"><link rel="prefetch" href="/TIL/assets/js/21.b34f006e.js"><link rel="prefetch" href="/TIL/assets/js/22.0d3e5c39.js"><link rel="prefetch" href="/TIL/assets/js/23.d4b048d9.js"><link rel="prefetch" href="/TIL/assets/js/24.e480ed38.js"><link rel="prefetch" href="/TIL/assets/js/3.d96adee9.js"><link rel="prefetch" href="/TIL/assets/js/4.ad4aa63e.js"><link rel="prefetch" href="/TIL/assets/js/5.2c70dfa1.js"><link rel="prefetch" href="/TIL/assets/js/6.40ee570f.js"><link rel="prefetch" href="/TIL/assets/js/7.5937946b.js"><link rel="prefetch" href="/TIL/assets/js/8.7233080d.js"><link rel="prefetch" href="/TIL/assets/js/9.2950460c.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.98cb0daf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">@kyungyunlee's notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/kyungyunlee/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://kyungyunlee.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/kyungyunlee/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://kyungyunlee.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Monthly I Learned</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Database</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/Database/1_relational_model.html" class="sidebar-link">Relational model and SQL</a></li><li><a href="/TIL/Database/2_database_storage.html" aria-current="page" class="active sidebar-link">Database storage</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/TIL/Database/3_acid.html" class="sidebar-link">ACID properties</a></li><li><a href="/TIL/Database/4_database_indexing.html" class="sidebar-link">Database indexing</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Functional Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/TIL/Books/" class="sidebar-link">Books</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ETC</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="database-storage"><a href="#database-storage" class="header-anchor">#</a> Database storage</h1> <p>Database is stored on disk, so the DBMS has to bring the data into memory.</p> <p>In DBMS, the query execution engine will ask the buffer pool to return specific data. The buffer pool is responsible for moving the data into and out of memory.</p> <img src="https://i.loli.net/2021/08/23/zWqauc4I5HXNPBV.png" alt="스크린샷 2021-08-23 오후 9.50.05" style="zoom:67%;"> <p>DBMS essentially is similar to the concept of virtual memory, in that the user is tricked to believing that their entire database is available in memory, but in reality, only a small amount of data is cached locally.
Instead of relying on OS, DBMS implements its own disk to memory operations.</p> <h3 id="files-and-pages"><a href="#files-and-pages" class="header-anchor">#</a> Files and pages</h3> <p>Data is organized as files in the disk, which are composed of one or more pages. Commonly, page size varies from 512MB to 16KB.
Pages are fixed-sized atomic unit of data.</p> <h3 id="how-are-files-stored"><a href="#how-are-files-stored" class="header-anchor">#</a> How are files stored?</h3> <p>It is responsible for managing files. It organizes files as a collection of pages.</p> <h3 id="how-are-pages-stored-heap-file-organization"><a href="#how-are-pages-stored-heap-file-organization" class="header-anchor">#</a> How are pages stored? - Heap file organization</h3> <p>We need to track which pages are where and which ones are empty.
It is often implemented as page directory structure, where there is a special page, called &quot;page directory&quot;, which tracks all the pages in the database.</p> <img src="https://i.loli.net/2021/08/23/2wGyhsFfat73NOT.png" alt="스크린샷 2021-08-23 오후 9.55.38" style="zoom:50%;"> <h3 id="within-the-page-how-are-data-organized-slotted-pages"><a href="#within-the-page-how-are-data-organized-slotted-pages" class="header-anchor">#</a> Within the page, how are data organized? - Slotted pages</h3> <p>Within each page, variable sized tuples are stored along with its slot id. The header contains the metadata about the tuples in the page, and from the beginning of the page, each slot's offset is saved.</p> <p>The actual tuple data is stored from the end of the page.</p> <img src="https://i.loli.net/2021/08/23/UH9xefQkmWjcC3r.png" alt="스크린샷 2021-08-23 오후 9.58.26" style="zoom:50%;"> <h3 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h3> <ul><li>All images and notes from CMU database course</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/Database/1_relational_model.html" class="prev">
        Relational model and SQL
      </a></span> <span class="next"><a href="/TIL/Database/3_acid.html">
        ACID properties
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.47e7122b.js" defer></script><script src="/TIL/assets/js/2.3a8afc01.js" defer></script><script src="/TIL/assets/js/10.d58d22f2.js" defer></script>
  </body>
</html>
